language: perl

dist: xenial

sudo: required

install:
# TkTable in recent Ubuntu/Debian currently causes
# invalid free() on program exit when used from Perl/Tcl.pm.
# See https://www.mail-archive.com/tcltk@perl.org/msg00817.html
#   - sudo apt-get -y install tklib libtk-img tix tk-table
    - sudo apt-get -y install tklib libtk-img tix
    - xvfb-run -a cpanm --verbose --notest --installdeps .

script:
    - xvfb-run -a perl Makefile.PL
    - xvfb-run -a make test

perl:
    - "5.30"
    - "5.28"
    - "5.26"
    - "5.24"
    - "5.22"
